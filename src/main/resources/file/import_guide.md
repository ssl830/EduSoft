# 班级人员管理功能说明文档

## 功能概述
本功能支持多种方式管理班级成员：
1. 通过CSV文件批量导入学生
2. 手动添加单个学生
3. 手动删除学生
4. 学生通过班级代码自主加入
5. 查看和管理班级成员列表

## 文件导入说明

### CSV文件格式要求
1. 文件必须包含表头
2. 必须包含`student_id`列
3. 文件编码必须为UTF-8
4. 文件大小限制：10MB

### CSV文件示例
```csv
student_id,name,other_info
1,张三,其他信息
2,李四,其他信息
```

### 导入流程
1. 选择要导入的班级
2. 上传CSV文件
3. 系统自动处理文件并导入学生
4. 显示导入结果（成功/失败数量及原因）

## 手动管理说明

### 手动添加学生
1. 选择要添加学生的班级
2. 输入学生ID
3. 系统验证学生信息并添加到班级
4. 显示添加结果

### 手动删除学生
1. 在班级成员列表中选择要删除的学生
2. 确认删除操作
3. 系统从班级中移除该学生
4. 显示删除结果

### 学生通过班级代码加入
1. 学生获取班级代码
2. 在系统中输入班级代码
3. 系统验证班级代码有效性
4. 验证通过后自动加入班级
5. 显示加入结果

## 导入记录说明
每次导入操作都会生成一条导入记录，包含以下信息：
- 导入时间
- 导入类型（文件导入/手动导入/代码加入）
- 总记录数
- 成功导入数
- 失败数
- 失败原因

## API接口说明

### 1. 文件导入
- 接口：`POST /api/imports/students/file`
- 参数：
  - classId：班级ID
  - operatorId：操作人ID
  - file：CSV文件

### 2. 手动导入
- 接口：`POST /api/imports/students/manual`
- 参数：
  - classId：班级ID
  - operatorId：操作人ID
  - studentIds：学生ID列表

### 3. 手动添加单个学生
- 接口：`POST /api/classes/{classId}/students`
- 参数：
  - classId：班级ID
  - studentId：学生ID

### 4. 手动删除学生
- 接口：`DELETE /api/classes/{classId}/students/{studentId}`
- 参数：
  - classId：班级ID
  - studentId：学生ID

### 5. 通过班级代码加入
- 接口：`POST /api/classes/join`
- 参数：
  - classCode：班级代码
  - studentId：学生ID

### 6. 获取导入记录
- 接口：`GET /api/imports/records/{classId}`
- 参数：
  - classId：班级ID

### 7. 获取导入记录详情
- 接口：`GET /api/imports/record/{id}`
- 参数：
  - id：导入记录ID

## 注意事项
1. 导入前请确保CSV文件格式正确
2. 已存在于班级中的学生将被跳过
3. 导入过程中如遇到错误，系统会记录具体原因
4. 建议定期查看导入记录，及时处理导入失败的情况
5. 班级代码具有时效性，过期后需要重新生成
6. 删除学生操作不可恢复，请谨慎操作

## 错误处理
1. 文件格式错误：检查CSV文件格式是否符合要求
2. 学生ID不存在：确认学生ID是否有效
3. 学生已在班级中：无需重复导入
4. 班级代码无效：确认代码是否正确或是否过期
5. 其他错误：查看具体错误信息进行处理 